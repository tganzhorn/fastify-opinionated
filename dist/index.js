var Ne=Object.create;var fe=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Ue=Object.getPrototypeOf,We=Object.prototype.hasOwnProperty;var Ve=(s,o)=>()=>(o||s((o={exports:{}}).exports,o),o.exports);var Xe=(s,o,l,h)=>{if(o&&typeof o=="object"||typeof o=="function")for(let m of Be(o))!We.call(s,m)&&m!==l&&fe(s,m,{get:()=>o[m],enumerable:!(h=He(o,m))||h.enumerable});return s};var Ye=(s,o,l)=>(l=s!=null?Ne(Ue(s)):{},Xe(o||!s||!s.__esModule?fe(l,"default",{value:s,enumerable:!0}):l,s));var ce=Ve(()=>{"use strict";var se;(function(s){(function(o){var l=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:b(),h=m(s);typeof l.Reflect<"u"&&(h=m(l.Reflect,h)),o(h,l),typeof l.Reflect>"u"&&(l.Reflect=s);function m(T,C){return function(O,k){Object.defineProperty(T,O,{configurable:!0,writable:!0,value:k}),C&&C(O,k)}}function P(){try{return Function("return this;")()}catch{}}function x(){try{return(0,eval)("(function() { return this; })()")}catch{}}function b(){return P()||x()}})(function(o,l){var h=Object.prototype.hasOwnProperty,m=typeof Symbol=="function",P=m&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",x=m&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",b=typeof Object.create=="function",T={__proto__:[]}instanceof Array,C=!b&&!T,O={create:b?function(){return U(Object.create(null))}:T?function(){return U({__proto__:null})}:function(){return U({})},has:C?function(e,t){return h.call(e,t)}:function(e,t){return t in e},get:C?function(e,t){return h.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},k=Object.getPrototypeOf(Function),E=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:qe(),$=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ge(),L=typeof WeakMap=="function"?WeakMap:Ae(),I=m?Symbol.for("@reflect-metadata:registry"):void 0,A=De(),W=je(A);function he(e,t,r,n){if(d(r)){if(!ee(e))throw new TypeError;if(!te(t))throw new TypeError;return Pe(e,t)}else{if(!ee(e))throw new TypeError;if(!w(t))throw new TypeError;if(!w(n)&&!d(n)&&!D(n))throw new TypeError;return D(n)&&(n=void 0),r=S(r),Oe(e,t,r,n)}}o("decorate",he);function ve(e,t){function r(n,c){if(!w(n))throw new TypeError;if(!d(c)&&!Se(c))throw new TypeError;Q(e,t,n,c)}return r}o("metadata",ve);function me(e,t,r,n){if(!w(r))throw new TypeError;return d(n)||(n=S(n)),Q(e,t,r,n)}o("defineMetadata",me);function we(e,t,r){if(!w(t))throw new TypeError;return d(r)||(r=S(r)),V(e,t,r)}o("hasMetadata",we);function Me(e,t,r){if(!w(t))throw new TypeError;return d(r)||(r=S(r)),N(e,t,r)}o("hasOwnMetadata",Me);function _e(e,t,r){if(!w(t))throw new TypeError;return d(r)||(r=S(r)),X(e,t,r)}o("getMetadata",_e);function ge(e,t,r){if(!w(t))throw new TypeError;return d(r)||(r=S(r)),Y(e,t,r)}o("getOwnMetadata",ge);function xe(e,t){if(!w(e))throw new TypeError;return d(t)||(t=S(t)),z(e,t)}o("getMetadataKeys",xe);function be(e,t){if(!w(e))throw new TypeError;return d(t)||(t=S(t)),J(e,t)}o("getOwnMetadataKeys",be);function Ce(e,t,r){if(!w(t))throw new TypeError;if(d(r)||(r=S(r)),!w(t))throw new TypeError;d(r)||(r=S(r));var n=q(t,r,!1);return d(n)?!1:n.OrdinaryDeleteMetadata(e,t,r)}o("deleteMetadata",Ce);function Pe(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r],c=n(t);if(!d(c)&&!D(c)){if(!te(c))throw new TypeError;t=c}}return t}function Oe(e,t,r,n){for(var c=e.length-1;c>=0;--c){var M=e[c],g=M(t,r,n);if(!d(g)&&!D(g)){if(!w(g))throw new TypeError;n=g}}return n}function V(e,t,r){var n=N(e,t,r);if(n)return!0;var c=B(t);return D(c)?!1:V(e,c,r)}function N(e,t,r){var n=q(t,r,!1);return d(n)?!1:K(n.OrdinaryHasOwnMetadata(e,t,r))}function X(e,t,r){var n=N(e,t,r);if(n)return Y(e,t,r);var c=B(t);if(!D(c))return X(e,c,r)}function Y(e,t,r){var n=q(t,r,!1);if(!d(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function Q(e,t,r,n){var c=q(r,n,!0);c.OrdinaryDefineOwnMetadata(e,t,r,n)}function z(e,t){var r=J(e,t),n=B(e);if(n===null)return r;var c=z(n,t);if(c.length<=0)return r;if(r.length<=0)return c;for(var M=new $,g=[],p=0,a=r;p<a.length;p++){var i=a[p],u=M.has(i);u||(M.add(i),g.push(i))}for(var f=0,y=c;f<y.length;f++){var i=y[f],u=M.has(i);u||(M.add(i),g.push(i))}return g}function J(e,t){var r=q(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function Z(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function d(e){return e===void 0}function D(e){return e===null}function Re(e){return typeof e=="symbol"}function w(e){return typeof e=="object"?e!==null:typeof e=="function"}function Te(e,t){switch(Z(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=t===3?"string":t===5?"number":"default",n=re(e,P);if(n!==void 0){var c=n.call(e,r);if(w(c))throw new TypeError;return c}return ke(e,r==="default"?"number":r)}function ke(e,t){if(t==="string"){var r=e.toString;if(j(r)){var n=r.call(e);if(!w(n))return n}var c=e.valueOf;if(j(c)){var n=c.call(e);if(!w(n))return n}}else{var c=e.valueOf;if(j(c)){var n=c.call(e);if(!w(n))return n}var M=e.toString;if(j(M)){var n=M.call(e);if(!w(n))return n}}throw new TypeError}function K(e){return!!e}function Ee(e){return""+e}function S(e){var t=Te(e,3);return Re(t)?t:Ee(t)}function ee(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function j(e){return typeof e=="function"}function te(e){return typeof e=="function"}function Se(e){switch(Z(e)){case 3:return!0;case 4:return!0;default:return!1}}function H(e,t){return e===t||e!==e&&t!==t}function re(e,t){var r=e[t];if(r!=null){if(!j(r))throw new TypeError;return r}}function ne(e){var t=re(e,x);if(!j(t))throw new TypeError;var r=t.call(e);if(!w(r))throw new TypeError;return r}function ae(e){return e.value}function oe(e){var t=e.next();return t.done?!1:t}function ie(e){var t=e.return;t&&t.call(e)}function B(e){var t=Object.getPrototypeOf(e);if(typeof e!="function"||e===k||t!==k)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(n==null||n===Object.prototype)return t;var c=n.constructor;return typeof c!="function"||c===e?t:c}function Ie(){var e;!d(I)&&typeof l.Reflect<"u"&&!(I in l.Reflect)&&typeof l.Reflect.defineMetadata=="function"&&(e=Fe(l.Reflect));var t,r,n,c=new L,M={registerProvider:g,getProvider:a,setProvider:u};return M;function g(f){if(!Object.isExtensible(M))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===f:break;case d(t):t=f;break;case t===f:break;case d(r):r=f;break;case r===f:break;default:n===void 0&&(n=new $),n.add(f);break}}function p(f,y){if(!d(t)){if(t.isProviderFor(f,y))return t;if(!d(r)){if(r.isProviderFor(f,y))return t;if(!d(n))for(var v=ne(n);;){var _=oe(v);if(!_)return;var R=ae(_);if(R.isProviderFor(f,y))return ie(v),R}}}if(!d(e)&&e.isProviderFor(f,y))return e}function a(f,y){var v=c.get(f),_;return d(v)||(_=v.get(y)),d(_)&&(_=p(f,y),d(_)||(d(v)&&(v=new E,c.set(f,v)),v.set(y,_))),_}function i(f){if(d(f))throw new TypeError;return t===f||r===f||!d(n)&&n.has(f)}function u(f,y,v){if(!i(v))throw new Error("Metadata provider not registered.");var _=a(f,y);if(_!==v){if(!d(_))return!1;var R=c.get(f);d(R)&&(R=new E,c.set(f,R)),R.set(y,v)}return!0}}function De(){var e;return!d(I)&&w(l.Reflect)&&Object.isExtensible(l.Reflect)&&(e=l.Reflect[I]),d(e)&&(e=Ie()),!d(I)&&w(l.Reflect)&&Object.isExtensible(l.Reflect)&&Object.defineProperty(l.Reflect,I,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}function je(e){var t=new L,r={isProviderFor:function(i,u){var f=t.get(i);return d(f)?!1:f.has(u)},OrdinaryDefineOwnMetadata:g,OrdinaryHasOwnMetadata:c,OrdinaryGetOwnMetadata:M,OrdinaryOwnMetadataKeys:p,OrdinaryDeleteMetadata:a};return A.registerProvider(r),r;function n(i,u,f){var y=t.get(i),v=!1;if(d(y)){if(!f)return;y=new E,t.set(i,y),v=!0}var _=y.get(u);if(d(_)){if(!f)return;if(_=new E,y.set(u,_),!e.setProvider(i,u,r))throw y.delete(u),v&&t.delete(i),new Error("Wrong provider for target.")}return _}function c(i,u,f){var y=n(u,f,!1);return d(y)?!1:K(y.has(i))}function M(i,u,f){var y=n(u,f,!1);if(!d(y))return y.get(i)}function g(i,u,f,y){var v=n(f,y,!0);v.set(i,u)}function p(i,u){var f=[],y=n(i,u,!1);if(d(y))return f;for(var v=y.keys(),_=ne(v),R=0;;){var ue=oe(_);if(!ue)return f.length=R,f;var $e=ae(ue);try{f[R]=$e}catch(Le){try{ie(_)}finally{throw Le}}R++}}function a(i,u,f){var y=n(u,f,!1);if(d(y)||!y.delete(i))return!1;if(y.size===0){var v=t.get(u);d(v)||(v.delete(f),v.size===0&&t.delete(v))}return!0}}function Fe(e){var t=e.defineMetadata,r=e.hasOwnMetadata,n=e.getOwnMetadata,c=e.getOwnMetadataKeys,M=e.deleteMetadata,g=new L,p={isProviderFor:function(a,i){var u=g.get(a);return!d(u)&&u.has(i)?!0:c(a,i).length?(d(u)&&(u=new $,g.set(a,u)),u.add(i),!0):!1},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:n,OrdinaryOwnMetadataKeys:c,OrdinaryDeleteMetadata:M};return p}function q(e,t,r){var n=A.getProvider(e,t);if(!d(n))return n;if(r){if(A.setProvider(e,t,W))return W;throw new Error("Illegal state.")}}function qe(){var e={},t=[],r=function(){function p(a,i,u){this._index=0,this._keys=a,this._values=i,this._selector=u}return p.prototype["@@iterator"]=function(){return this},p.prototype[x]=function(){return this},p.prototype.next=function(){var a=this._index;if(a>=0&&a<this._keys.length){var i=this._selector(this._keys[a],this._values[a]);return a+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},p.prototype.throw=function(a){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),a},p.prototype.return=function(a){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:a,done:!0}},p}(),n=function(){function p(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(p.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),p.prototype.has=function(a){return this._find(a,!1)>=0},p.prototype.get=function(a){var i=this._find(a,!1);return i>=0?this._values[i]:void 0},p.prototype.set=function(a,i){var u=this._find(a,!0);return this._values[u]=i,this},p.prototype.delete=function(a){var i=this._find(a,!1);if(i>=0){for(var u=this._keys.length,f=i+1;f<u;f++)this._keys[f-1]=this._keys[f],this._values[f-1]=this._values[f];return this._keys.length--,this._values.length--,H(a,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},p.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},p.prototype.keys=function(){return new r(this._keys,this._values,c)},p.prototype.values=function(){return new r(this._keys,this._values,M)},p.prototype.entries=function(){return new r(this._keys,this._values,g)},p.prototype["@@iterator"]=function(){return this.entries()},p.prototype[x]=function(){return this.entries()},p.prototype._find=function(a,i){if(!H(this._cacheKey,a)){this._cacheIndex=-1;for(var u=0;u<this._keys.length;u++)if(H(this._keys[u],a)){this._cacheIndex=u;break}}return this._cacheIndex<0&&i&&(this._cacheIndex=this._keys.length,this._keys.push(a),this._values.push(void 0)),this._cacheIndex},p}();return n;function c(p,a){return p}function M(p,a){return a}function g(p,a){return[p,a]}}function Ge(){var e=function(){function t(){this._map=new E}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(r){return this._map.has(r)},t.prototype.add=function(r){return this._map.set(r,r),this},t.prototype.delete=function(r){return this._map.delete(r)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.keys()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[x]=function(){return this.keys()},t}();return e}function Ae(){var e=16,t=O.create(),r=n();return function(){function a(){this._key=n()}return a.prototype.has=function(i){var u=c(i,!1);return u!==void 0?O.has(u,this._key):!1},a.prototype.get=function(i){var u=c(i,!1);return u!==void 0?O.get(u,this._key):void 0},a.prototype.set=function(i,u){var f=c(i,!0);return f[this._key]=u,this},a.prototype.delete=function(i){var u=c(i,!1);return u!==void 0?delete u[this._key]:!1},a.prototype.clear=function(){this._key=n()},a}();function n(){var a;do a="@@WeakMap@@"+p();while(O.has(t,a));return t[a]=!0,a}function c(a,i){if(!h.call(a,r)){if(!i)return;Object.defineProperty(a,r,{value:O.create()})}return a[r]}function M(a,i){for(var u=0;u<i;++u)a[u]=Math.random()*255|0;return a}function g(a){if(typeof Uint8Array=="function"){var i=new Uint8Array(a);return typeof crypto<"u"?crypto.getRandomValues(i):typeof msCrypto<"u"?msCrypto.getRandomValues(i):M(i,a),i}return M(new Array(a),a)}function p(){var a=g(e);a[6]=a[6]&79|64,a[8]=a[8]&191|128;for(var i="",u=0;u<e;++u){var f=a[u];(u===4||u===6||u===8)&&(i+="-"),f<16&&(i+="0"),i+=f.toString(16).toLowerCase()}return i}}function U(e){return e.__=void 0,delete e.__,e}})})(se||(se={}))});var St=Ye(ce(),1);var F=Symbol.for("DEPS_CTX");var le="controller:path",Qe="controller:config";function ze(s,o){return l=>{let h={deps:o};Reflect.defineMetadata(F,h,l);let m=Reflect.getMetadataKeys(l.prototype),P={rootPath:s,routerCtxs:new Map};for(let x of m)if(x.startsWith(le)){let b=x.split(":").slice(-1)[0];P.routerCtxs.set(b,Reflect.getMetadata(x,l.prototype))}Reflect.defineMetadata(Qe,P,l.prototype)}}function G(s,o,l){return(h,m,P)=>{let x=P.value,b=[];for(let C of Reflect.getMetadataKeys(h)){let[O,k,E]=C.split(":");switch(O){case"req":b[E]={type:"req",methodName:k};break;case"rep":b[E]={type:"rep",methodName:k};break;case"query":b[E]={type:"query",name:Reflect.getMetadata(C,h),methodName:k};break;case"param":b[E]={type:"param",name:Reflect.getMetadata(C,h),methodName:k}}}let T={path:s,method:o,propertyKey:m,call(...C){return x?.apply(this,C)},opts:l,params:b};Reflect.defineMetadata(`${le}:${m}`,T,h)}}function Je(s,o){return G(s,"GET",o)}function Ze(s,o){return G(s,"GET",o)}function Ke(s,o){return G(s,"PUT",o)}function et(s,o){return G(s,"DELETE",o)}function tt(s,o){return G(s,"PATCH",o)}function rt(){return(s,o,l)=>{Reflect.defineMetadata(`body:${String(o)}:${l}`,null,s)}}function nt(s){return(o,l,h)=>{Reflect.defineMetadata(`query:${String(l)}:${h}`,s,o)}}function at(s){return(o,l,h)=>{Reflect.defineMetadata(`param:${String(l)}:${h}`,s,o)}}function ot(){return(s,o,l)=>{Reflect.defineMetadata(`req:${String(o)}:${l}`,null,s)}}function it(){return(s,o,l)=>{Reflect.defineMetadata(`rep:${String(o)}:${l}`,"rep",s)}}var ut=Symbol.for("INJECTABLE_SERVICE");function xt(s){return o=>{let l={deps:s};Reflect.defineMetadata(F,l,o),Reflect.defineMetadata(ut,null,o)}}function de(s,o,l){return{request:s,reply:o,routerCtx:l}}function pe(s){let o=[];for(let h of s.params)switch(h.type){case"req":o.push("ctx.request");break;case"rep":o.push("ctx.reply");break;case"query":o.push(`ctx.request.query.${h.name}`);break;case"param":o.push(`ctx.request.params.${h.name}`);break}let l=`
  return function(fn, ctx) {
    return fn(${o.join(",")});
  }
  `;return new Function(l)()}function ft(s){let o=new Map,l=[];for(let h of s){let m=ye(h,o);l.push(m)}return l}function ye(s,o){if(o.has(s))return o.get(s);let{deps:l}=Reflect.getMetadata(F,s)||[],h=l.map(P=>ye(P,o)),m=new s(...h);return o.set(s,m),m}function kt(s,{controllers:o}){let l=ft(o);for(let h of l){let{routerCtxs:m,rootPath:P}=Reflect.getMetadata("controller:config",h);for(let[,x]of m.entries()){let b=pe(x);s.get(P+x.path,x.opts??{},async(T,C)=>{let O=de(T,C,x);return b(h[x.propertyKey].bind(h),O)})}}}export{rt as Body,ze as Controller,et as Delete,Je as Get,ut as INJECTABLE_SERVICE_SYMBOL,at as Parameter,tt as Patch,Ze as Post,Ke as Put,nt as Query,it as Rep,ot as Req,xt as Service,kt as registerControllers};
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=index.js.map